image:
  repository: ghcr.io/YOUR_USER/rag-aerospace
  tag: latest
  pullPolicy: IfNotPresent

env:
  - name: OPENAI_API_KEY
    valueFrom:
      secretKeyRef: { name: openai-secret, key: api_key }
  - name: EMBED_MODEL
    value: text-embedding-3-large
  - name: MILVUS_HOST
    value: milvus-standalone.milvus.svc.cluster.local
  - name: MILVUS_PORT
    value: "19530"
  - name: API_KEY
    valueFrom:
      secretKeyRef: { name: api-secrets, key: api_key }
  - name: JWT_SECRET
    valueFrom:
      secretKeyRef: { name: api-secrets, key: jwt_secret }
  - name: JWT_ISSUER
    valueFrom:
      secretKeyRef: { name: api-secrets, key: jwt_issuer }
  - name: JWT_AUDIENCE
    valueFrom:
      secretKeyRef: { name: api-secrets, key: jwt_audience }
  - name: REDIS_URL
    valueFrom:
      secretKeyRef: { name: api-secrets, key: redis_url }
  - name: RETRIEVER_BACKEND
    value: faiss
  - name: METRICS_PUBLIC
    value: "false"
  - name: RATE_LIMIT_PER_MIN
    value: "120"

service:
  type: ClusterIP
  port: 80
  targetPort: 8000
